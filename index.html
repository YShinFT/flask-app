{% extends "base.html" %}

{% block title %}Главная - Финансовый менеджер{% endblock %}

{% block content %}
<h1 style="color: #333; margin-bottom: 30px;">
    Добро пожаловать, {{ current_user['username'] }}!</h1>

<!-- Карточки статистики -->
<div class="grid grid-3">
    <div class="stat-card" style="border-top-color: #2196F3;">
        <h3>Текущий баланс</h3>
        <div class="value">{{ format_currency(balance) }}</div>
        <p>Общая сумма средств</p>
    </div>

    <div class="stat-card" style="border-top-color: #4CAF50;">
        <h3>Всего доходов</h3>
        <div class="value">+{{ format_currency(total_income) }}</div>
        <p>Сумма всех поступлений</p>
    </div>

    <div class="stat-card" style="border-top-color: #f44336;">
        <h3>Всего расходов</h3>
        <div class="value">-{{ format_currency(total_expense) }}</div>
        <p>Сумма всех трат</p>
    </div>
</div>

<!-- Быстрые действия -->
<div style="background: #f8f9fa; border-radius: 10px; padding: 25px; margin: 20px 0; border-left: 5px solid #4CAF50;">
    <h2 style="font-size: 20px; color: #333; margin-bottom: 20px;">Быстрые действия</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
        <a href="/add-transaction?type=income" class="btn btn-primary" style="padding: 12px; text-align: center;">
            <i class="fas fa-plus-circle"></i> Добавить доход
        </a>
        <a href="/add-transaction?type=expense" class="btn btn-danger" style="padding: 12px; text-align: center;">
            <i class="fas fa-minus-circle"></i> Добавить расход
        </a>
        <a href="/investments" class="btn btn-secondary" style="padding: 12px; text-align: center;">
            <i class="fas fa-chart-line"></i> Инвестиции
        </a>
        <a href="/goals" class="btn btn-success" style="padding: 12px; text-align: center;">
            <i class="fas fa-bullseye"></i> Цели
        </a>
    </div>
</div>

<!-- Последние транзакции -->
<div style="background: #f8f9fa; border-radius: 10px; padding: 25px; margin: 20px 0; border-left: 5px solid #4CAF50;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2 style="font-size: 20px; color: #333;">Последние операции</h2>
        <a href="/transactions" class="btn btn-primary" style="padding: 8px 16px;">Все операции</a>
    </div>

    {{ get_recent_transactions_table(recent_transactions)|safe }}
</div>

<!-- Секция инвестиций -->
{% if investments %}
<div style="background: #f8f9fa; border-radius: 10px; padding: 25px; margin: 20px 0; border-left: 5px solid #2196F3;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2 style="font-size: 20px; color: #333;">Последние инвестиции</h2>
        <a href="/investments" class="btn btn-secondary" style="padding: 8px 16px;">Все инвестиции</a>
    </div>
    {{ format_investment_html(recent_investments)|safe }}
</div>
{% endif %}
{% endblock %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>{% block title %}–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä{% endblock %}</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='style1.css') }}">
</head>
<body>
    <div class="container">
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
        <nav class="navbar">
            <a href="/" class="logo">
                <span class="logo-icon">üí∞</span>
                <span class="logo-text">–§–∏–Ω–∞–Ω—Å–ú–µ–Ω–µ–¥–∂–µ—Ä</span>
            </a>

            {% if current_user %}
                <div class="mobile-menu-toggle" onclick="toggleMobileMenu()">
                    <i class="fas fa-bars"></i>
                </div>
            {% endif %}

            <div class="nav-header">
                {% if current_user %}
                    <div class="user-info">
                        <i class="fas fa-user-circle"></i>
                        <div class="user-details">
                            <div class="username">{{ current_user['username'] }}</div>
                            <div class="user-role">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
                        </div>
                    </div>
                {% endif %}
                {% if not current_title %}
                    {% set current_title = '–ì–ª–∞–≤–Ω–∞—è' %}
                {% endif %}
                <div class="nav-links" id="navLinks">
                    {% if current_user %}
                        {% include 'partials/nav_links.html' %}
                        <a href="/logout" class="nav-link logout-link">
                            <i class="fas fa-sign-out-alt"></i> <span class="nav-text">–í—ã–π—Ç–∏</span>
                        </a>
                    {% else %}
                        <div class="nav-links-mobile">
                            <a href="/login" class="nav-link">
                                <i class="fas fa-sign-in-alt"></i> –í–æ–π—Ç–∏
                            </a>
                            <a href="/register" class="nav-link">
                                <i class="fas fa-user-plus"></i> –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
                            </a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </nav>

        <div class="menu-overlay" id="menuOverlay" onclick="toggleMobileMenu()"></div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="content">
            {% block content %}{% endblock %}
        </div>

        <!-- –§—É—Ç–µ—Ä -->
        <div class="footer">
            <p>–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä | –Ø—à–∏–Ω –í–ª–∞–¥–∏—Å–ª–∞–≤ | {{ current_year }}</p>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
    function toggleMobileMenu() {
        const navLinks = document.getElementById('navLinks');
        const overlay = document.getElementById('menuOverlay');
        navLinks.classList.toggle('active');
        overlay.classList.toggle('active');
        document.body.style.overflow = navLinks.classList.contains('active') ? 'hidden' : '';
    }

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Å—ã–ª–∫—É
    document.addEventListener('DOMContentLoaded', function() {
        const navLinks = document.querySelectorAll('.nav-link');
        navLinks.forEach(link => {
            link.addEventListener('click', function() {
                toggleMobileMenu();
            });
        });

        // –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        const images = document.querySelectorAll('img');
        images.forEach(img => {
            img.style.maxWidth = '100%';
            img.style.height = 'auto';
        });
    });

    // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
    let lastTouchEnd = 0;
    document.addEventListener('touchend', function(event) {
        const now = (new Date()).getTime();
        if (now - lastTouchEnd <= 300) {
            event.preventDefault();
        }
        lastTouchEnd = now;
    }, false);
    </script>

    {% block scripts %}{% endblock %}
</body>
</html>